{% extends "base_generic.html" %}
{% load static %}
{% block staticfiles %}
<link rel="stylesheet" href="{% static 'css/styles.css' %}">
<script defer type="text/javascript" src="{% static 'js-bundles/create-bundle.js' %}"></script>

{% endblock staticfiles %}
{% block content %}
<span class="warning"></span>
<div class="scroll-list">
  <div class="header">
    <h2>My Discussions</h2>
  </div>
  <div class="list-body">
    {% if not all_discussions %}
     <div class="list-item">
       <h3>No discussions yet.</h3>
       <p>Click add to get started!</p>
     </div>
     {% else %}
     {% for d in all_discussions %}
     <div class="list-item" value={{d.id}}>
       <h3>{{d.title}}</h3>
       <p>{{ d.description }}</p>
     </div>
     <div class="list-item edit" value="{{d.id}}">
       <form id="edit-discussion" class="" action="" method="post">
         {% csrf_token %}
        {{ edit_form }}
         <div class="button-row">
           <button type="submit" form="edit-discussion" value="{{d.id}}" name="edit-discussion">Save Changes</button>
           <button type="button"  value="{{d.id}}" id="cancelEdit" name="cancel-edit">Cancel</button>
         </div>
       </form>
     </div>
     {% endfor %}
    {% endif %}

  </div>
  <div class="list-footer">
    <div class="button">

      <button type="button" id="edit" name="button"><img src="{% static 'media/pencil.svg' %}" alt="Edit"></button>
    </div>
    <div id="addButton" class="button">
      <button type="button" id="add" name="button"><img src="{% static 'media/plus.svg' %}" alt="Add"></button>
    </div>
    <div class="button">
      <button type="button" id="share" name="button"><img src="{% static 'media/share.svg' %}" alt="Share"></button>
    </div>
  </div>
</div>
<div class="modal-content">
  <div class="header">
    <h2>New Discussion</h2>
  </div>
  <form id="add-discussion"  action="" method="post">
         {% csrf_token %}
         {{ add_form }}
         <button type="submit" form="add-discussion" name="add-discussion">Save Discussion</button>
       </form>
</div>
{% endblock %}
